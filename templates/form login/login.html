{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login</title>
     <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
     <link rel="stylesheet" href="{% static 'css/all.min.css' %}">
     <link rel="stylesheet" href="{% static 'css/login.css' %}">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">

     <script src="{% static 'js/jquery-3.5.1.slim.min.js' %}"></script>
     <script src="{% static 'js/popper.min.js' %}"></script>
     <script src="{% static 'js/bootstrap.min.js' %}"></script>
     <script src="{% static 'js/login.js' %}"></script>
     <script src="https://kit.fontawesome.com/fc106cc491.js" crossorigin="anonymous"></script>
     <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-body-tertiary">
        <div class="container">
        <h2>Marketing</h2>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
             <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                <li class="nav-item dropdown">
                    <li class="nav-item">
                    <a class="nav-link active " aria-current="page" href="{% url 'home' %}">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'about' %}">About us</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'service' %}">services</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'portfolio' %}">Our Work</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'contact' %}">contact us</a>
                </li>
                <li class="nav-item" id="logg">
                    <a class="nav-link" href="{% url 'register' %}">Register</a>
                </li>
             </li>
        </div>
</nav>
    <div class="container parent" >
        <div class="row justify-content-center">
            <div class="inputForm w-75 m-5 p-5 text-center">
                <h1 class="text-light">Please Login Here</h1>
                <div>
                  <video id="videoPlayer" width="320" height="240" autoplay></video>
                  <div id="imagePreview" style="position: relative;"></div>
                </div>
                <form method="post" enctype="multipart/form-data" class="mt-4">
                    {% csrf_token %}
                    <div class="form-group">
                      <input type="email" name="email" id="logInEmail" class="form-control" placeholder="Enter your email">
                    </div>
                    <br>
                    <div class="form-group">
                      <input type="password" name="password" id="logInPass" class="form-control" placeholder="Enter your password">
                    </div>
                    <br>
                    <div class="form-group">
                      <input type="hidden" id="capturedImage" name="captured_image" />
                    </div>
                    <br>
                    <div class="form-group">
                      <button type="button" id="captureBtn" class="btn btn-outline-info btn-block mt-4">Capture Image</button>
                    </div>
                    <div class="form-group">
                      <button type="submit" class="btn btn-outline-info btn-block mt-4">Login</button>
                    </div>
                    <br>
                    {% if messages %}
                    {% for message in messages %}
                    <div class="alert alert-danger" role="alert">
                      {{ message }}
                      <br>
                    </div>
                    {% endfor %}
                    {% endif %}
                    <br>
                    <h6 class="text-white">don't have an account ? <span><a href="{% url 'register' %}">Sign up</a></span> </h6>
                  </form>
            </div>
        </div>
    </div>
    <br>
    <br>

    <div class="footer">
        <div class="container">
            <div class="social-media">
                <a href="https://www.facebook.com"><i class="fa-brands fa-facebook-f"></i></a>
                <a href="https://www.twitter.com"><i class="fa-brands fa-twitter"></i></a>
                <a href="https://www.instagram.com"><i class="fa-brands fa-instagram"></i></a>
                <a href="https://github.com"><i class="fa-brands fa-github"></i></a>
            </div>
            <p>Copy Right 2023 Â© By team 1  <a href="home">Marketing</a> All Rights Reserved</p>
        </div>
    </div>


    <style>
        .footer {
              text-align: center;
              background-color: #333333;
              padding: 50px 0px;
          }
          
          .footer .social-media a {
              padding: 10px;
              color: white;
              font-size: 18;
              font-weight: 800;
          }
          
          .footer .social-media a:hover {
              color: #FF305B;
          }
          
          .footer p {
              color: white;
              padding: 20px;
          }
          
          .footer p a {
              color: #FF305B;
              text-decoration: none;
          }
          
          .footer p a:hover {
              text-decoration: underline;
          }
          .navbar {
        background-color: #333;
        padding: 10px;
    }

    .navbar h2 {
        color: #fff;
        font-size: 24px;
        margin-right: 20px;
    }

    .navbar-nav .nav-item {
        margin-right: 10px;
    }

    .navbar-nav .nav-link {
        color: #fff;
    }

    .navbar-nav .nav-link:hover {
        color: #ffc107;
    }

    /* Active Link Styling */
    .navbar-nav .nav-item .active {
        color: #ffc107 !important;
    }

    /* Dropdown Styling */
    .navbar-nav .nav-item .dropdown .nav-link {
        position: relative;
    }

    .navbar-nav .nav-item .dropdown .nav-link::after {
        content: "";
        position: absolute;
        top: 50%;
        right: -8px;
        transform: translateY(-50%);
        border-top: 5px solid transparent;
        border-bottom: 5px solid transparent;
        border-left: 5px solid #fff;
    }

    .navbar-nav .nav-item .dropdown .nav-link:hover::after {
        border-left-color: #ffc107;
    }

    /* Welcome Message Styling */
    .navbar-nav .nav-item:last-child .nav-link {
        margin-left: 20px;
    }
    body {
  background-color: #ffffff;
  font-family: "Titillium Web", sans-serif;
}

.inputForm {
  background-color: #333333;
  box-shadow: -5px 2px 54px -9px rgb(0 0 0);
}
.form-control {
  color: #fff !important;
}
.form-control:focus {
  background-color: #24353f;
}
input:focus {
  box-shadow: 0 0 0 0 transparent !important;
}
.inputForm h1 {
  font-size: 40px;
  padding: 20px;
}
.inputForm input {
  background-color: transparent;
}
.inputForm a {
  text-decoration: none;
  color: #fff;
}
/* ?css about Home page */
.home-massage {
  background-color: #24343f;
  box-shadow: -5px 2px 54px -9px rgb(0 0 0);
  padding: 48px;
}
    </style>


<script>
  const videoPlayer = document.getElementById('videoPlayer');
  const captureBtn = document.getElementById('captureBtn');
  const capturedImageInput = document.getElementById('capturedImage');
  let stream = null;

  // Get access to the user's camera
  navigator.mediaDevices.getUserMedia({ video: true })
      .then(stream => {
          videoPlayer.srcObject = stream;
      })
      .catch(error => {
          console.error('Error accessing camera:', error);
      });

  function closeStream() {
  const mediaStream = videoPlayer.srcObject;

  // Check if a media stream exists
  if (mediaStream) {
    const tracks = mediaStream.getTracks();

    // Stop all tracks in the media stream
    tracks.forEach(track => track.stop());

    // Clear the media stream from the video element
    videoPlayer.srcObject = null;
  }
}

captureBtn.addEventListener('click', () => {
  const canvas = document.createElement('canvas');
  const context = canvas.getContext('2d');

  // Draw current video frame onto the canvas
  canvas.width = videoPlayer.videoWidth;
  canvas.height = videoPlayer.videoHeight;
  context.drawImage(videoPlayer, 0, 0, canvas.width, canvas.height);

  // Convert canvas to base64-encoded data URL
  const capturedImage = canvas.toDataURL();

  // Set captured image as input value
  capturedImageInput.value = capturedImage;

  // Hide the video element
  videoPlayer.style.display = 'none';

  // Show the captured image in HTML
  const imagePreview = document.getElementById('imagePreview');
  imagePreview.innerHTML = '';
  const img = document.createElement('img');
  img.src = capturedImage;
  img.style.maxWidth = '320px';
  img.style.height = '240px';
  imagePreview.appendChild(img);

  closeStream();
});
</script>
</body>
</html>




